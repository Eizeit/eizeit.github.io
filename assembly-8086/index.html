<!DOCTYPE html>
<html>
  <head>
  <title>【汇编与接口】 8086CPU结构 – 今天又刷了什么水题 – 为者常成，行者常至</title>

      <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="8086的编程结构、工作模式、引脚功能、操作和时序以及存储器组织相关知识。

2.1 8086CPU的编程结构


  
    16根地址线、20根数据线、时钟频率5MHz
  
  
    8086分为总线接口单元(BIU)和执行单元(EU)

    

    执行单元包括：

    
      
        通用寄存器

        8个16位寄存器

        
          
            4个通用寄存器：AX、BX、CX、DX

            可以拆分为2个单独的8位寄存器

            
              
                AX 累加器

                I/O指令必用
              
              
                BX 基址寄存器

                存放基地址
              
              
                CX 计数寄存器

                循环指令和串处理隐含的指定计数器
              
              
                DX 数据寄存器

                可与AX拼接成32位，DX中存放高16位

                I/O指令中存放外设端口号
              
            
          
          
            4个通用寄存器：SP、BP、SI、DI，更多被用于变址寻址：SI/DI与段寄存器DS/ES联用实现数据的寻址；SP、BP用于堆栈操作,与SS联用实现寻址

            
              
                SI 源变址寄存器

                间接寻址时用作地址寄存器和变址寄存器

                串操作时用作源变址寄存器
              
              
                DI 目的变址寄存器

                间接寻址时用作地址寄存器和变址寄存器

                串操作时用作目的变址寄存器
              
              
                SP 堆栈指针寄存器
              
              
                BP 基址指针寄存器
              
            
          
        
      
      
        标志寄存器 （记）

        16位（9位有效，7位空闲）

        CF、DF、IF、TF可由指令设置，其余5个由EU设置

        
          
            
              15
              14
              13
              12
              11
              10
              9
              8
              7
              6
              5
              4
              3
              2
              1
              0
            
          
          
            
               
               
               
               
              OF
              DF
              IF
              TF
              SF
              ZF
               
              AF
               
              PF
               
              CF
            
          
        

        
          
            状态位

            (1) CF (Carry Flag)

            进位标志，反应算术运算后最高位（字节操作$D_7$，字操作$D_{15}$）是否出现进位/借位，有进位则为1。

            主要用于加减法，移位和环移指令也会改变CF

            (2) PF (Parity Flag)

            奇偶标志，1表示结果中有偶数个1，0表示结果中有奇数个1

            (3) AF (Auxiliary Carry Flag)

            辅助进位标志，1表示$D_3$向$D_4$进位/借位，0表示没有

            用于BCD码算术运算指令

            (4) ZF (Zero Flag)

            零标志，1标志运算结果为0

            (5) SF (Sign Flag)

            符号标志，与带符号运算的结果符号位（$D_7/D_{15}$）一致，1表示结果为负数

            (6) OF (Overflow Flag)

            溢出标志，带符号数（补码）运算结果是否超过机器能表示的范围（-128~127 / -32768~32767），1表示溢出
          
          
            控制位

            (1) DF (Direction Flag)

            方向标志，字符串操作时用到，字节操作加减1，字操作加减2

            1表示递减，即高地址向低地址

            0表示递增，即低地址向高地址

            (2) IF (Interrupt Enable Flag)

            中断允许标志，1表示允许响应

            IF对不可屏蔽中断请求及内部中断无效

            (3) TF (Trap Flag)

            陷阱标志，为1时每执行完一条指令都自动产生一个内部中断，常用于调试
          
        
      
      
        算术逻辑单元（ALU)
      
      
        EU控制系统
      
    

    总线接口单元包括：

    
      
        段寄存器

        
          
            机器字长=存储字长=16位
          
          
            小端存储，即高字节存放在高地址，低字节存放在低地址，以低字节的地址作为整个字（双字）的地址
          
          
            8086的分段管理：物理地址=(段寄存器)*16+(地址寄存器)

            段与段之间可以是连续的、断开的、部分重叠或全部重叠的

            分段管理的意义：减少指令长度，缩短指令执行时间；便于程序浮动装配

            ​    一些默认行为：

            
              
                取指令时：CS:IP
              
              
                堆栈操作时：SS:SP
              
              
                涉及存储器操作数时（除了以BP为地址寄存器外）：DS作为默认段基址（可替换为CS/DS/ES，添加段跨越前缀）

                偏移地址为某16位偏移量（可以是指令中直接提供的16位地址、某个16位寄存器（BX/DI/SI）中的值、指令中的位移量加上某16位地址寄存器（BX/BP/DI/SI）中的值）
              
              
                ES用于串操作指令中的数据块传送指令：

                源地址：默认DS段基址（可替换为CS/DS/ES，添加段跨越前缀），偏移地址SI

                目的地址：ES:DI
              
              
                BP作地址寄存器：

                SS默认段基址（可替换为CS/DS/ES，添加段跨越前缀），SS:EA
              
            
          
          
            4个段寄存器

            
              代码段寄存器CS
              数据段寄存器DS
              附加段寄存器ES
              堆栈段寄存器SS（后进先出）
            
          
        
      
      
        指令指针寄存器IP（就是计组里说的PC）

        提供下一条指令的地址，具体来说是下一条指令的（代码）段内偏移地址，代码段的段地址由CS提供
      
      
        地址形成逻辑（20位地址加法器形成地址）
      
      
        总线控制逻辑
      
      
        指令队列（6字节指令队列，先进先出，存放待执行指令，出去的进入IP）
      
    
  


2.2 8086CPU的工作模式与引脚功能


  
    工作模式（略）
  
  
    引脚功能

    

    注： /分时复用   (最大模式/最小模式)

    最小模式：

    
      
        $AD_0 \sim AD_{15}$：地址/数据分时复用（双向、三态）

        $T_1$时用作地址总线的低16位，其余时间用作数据总线进行数据传输
      
      
        $AD_{16}/S_3 \sim AD_{19}/S_6$：地址总线高4位/状态总线（输出、三态）

        $T_1$时用作地址总线的高4位（I/O操作中置0），其余时间表示CPU的状态信息

        $S_6$恒为低电平，$S_5$反映IF的值，$S_4$和$S_3$表示正在使用的段寄存器
      
      
        $\overline{BHE}/S_7$：高8位数据总线允许/状态信号（输出）

        $T_1$时作为总线高半部分允许信号，低电平有效，其余时间输出状态信号$S_7$；DMA方式下为高阻态

        与$A_0$结合决定高字节工作还是低字节工作（见奇地址存储与偶地址存储，估计大概率考）
      
      
        CLK：系统时钟信号（输入）
      
      
        RESET：复位信号（输入）

        至少维持4个时钟周期的高电平才有效，复位后各寄存器状态如下图所示：

        

        注意CS寄存器复位后的值是0FFFFH

        IF也被清零辽，系统关中断

        当复位信号变为低电平时，CPU从FFFF0H处开始执行程序，该处通常存放一条JMP指令，以转移到系统程序的实际开始处。复位时地址总线浮空，直到cpu脱离复位状态；其他控制信号先变高一段时间，然后浮空；ALE、HLDA信号变为无效

        复位信号RESET撤销后，经过7个时钟周期，CPU才启动
      
      
        NMI：不可屏蔽中断请求信号（输入）

        上升沿触发，8086完成当前指令后跳转到不可屏蔽中断服务程序
      
      
        INTR：可屏蔽中断请求信号（输入）

        电平触发，每条指令的最后一个时钟周期CPU采样该信号，若INTR为高电平且IF=1，则执行中断响应；若IF=0则不响应，可见INTR可由软件复位IF加以屏蔽
      
      
        READY：准备就绪信号（输入）

        当被访问部件无法在规定时间完成数据传输，就向CPU发READY为低电平的信号，这样CPU就插入若干个等待周期$T_w$，完成传输后被访问部件再使READY信号为高电平
      
      
        $\overline{RD}$：读控制信号（三态、输出）

        低电平时CPU执行读操作；DMA方式下为高阻态
      
      
        $\overline{TEST}$：等待测试控制信号（输入）

        WAIT指令期间，每隔5个时钟周期CPU对该引脚采样，高电平继续等待，低电平继续执行后续指令
      
      
        MN/$\overline{MX}$：最小/最大模式控制信号（输入）
      
      
        M/$\overline{IO}$：存储器/IO访问控制信号（输出）
      
      
        ALE：地址锁存允许信号（输出）

        高电平有效，总线周期的第一个时钟周期内发出正脉冲信号，其下降沿将$AD_0 \sim AD_{15}$以及$AD_{16}/S_3 \sim AD_{19}/S_6$上的地址信息锁存进地址锁存器
      
      
        $\overline{DEN}$：数据允许信号（输出、三态）

        用作总线收发器的允许控制信号，在CPU访存或I/O的总线周期的后一段时间内有效
      
      
        DT/$\overline{R}$：数据发送/接受信号（输出、三态）

        CPU写/读
      
      
        $\overline{WR}$：写控制信号（输出、三态）
      
      
        $\overline{INTA}$：中断响应信号（输出、三态）

        当CPU响应INTR的可屏蔽中断请求时，$\overline{INTA}$在中断响应周期内变为低电平
      
      
        HOLD：保持请求信号（输入）

        高电平时CPU完成当前总线周期后进入HOLD状态，让出总线控制权
      
      
        HLDA：保持响应信号（输出）

        CPU对HOLD信号的响应信号，使三态信号线全部处于高阻态，外部逻辑控制总线
      
    
  
  
    存储器和I/O端口的读写控制信号逻辑

    

    
      
        
          $\overline{RD}$
          $M/\overline{IO}$
          $\overline{WR}$
          操作
        
      
      
        
          0
          1
          1
          读内存
        
        
          0
          0
          1
          读外设
        
        
          1
          1
          0
          写内存
        
        
          1
          0
          0
          写外设
        
      
    

    注意与后面的8237A比较，8237A作为主片时是同时读内存写外设/写内存读外设
  


2.3 8086的操作和时序


  
    基本概念

    机器周期：与主频相关，又叫时钟周期

    指令周期：CPU执行一条指令需要的时间，以机器周期为单位

    总线周期：CPU通过总线访问存储器或I/O设备的时间周期，以机器周期为单位
  
  
    8086的总线周期

    

    缓冲：撤销地址信息，地址信息进地址锁存器

    数据传输：允许插入若干个等待周期
  
  
    8086的操作类型

    内部操作：ALU操作、寄存器操作

    外部操作：总线读/写操作、中断响应操作、中线保持/响应操作、系统复位/启动操作、暂停操作
  
  
    8086的操作时序（最小模式）

    
      
        总线操作

        
          
            总线读操作

            
          
          
            总线写操作

            
          
        
      
      
        中断响应操作

        

        响应中断时CPU执行两个中断周期，第一个周期的$T_2 \sim T_4$时，$\overline{INTA}$为低电平，这里作为对中断请求设备的响应；第二个周期的$T_2 \sim T_4$时，$\overline{INTA}$为低电平，这里用于通知中断请求设备（通过中断控制器）把中断类型号（决定了中断服务程序入口地址）送到数据线低八位（$AD_7 \sim AD_0$）。在8086中，2个周期之间有3个空闲周期$T_i$
      
      
        总线保持与响应操作

        

        其他系统总线主设备向8086请求总线，发送HOLD请求信号，CPU接收到HOLD信号后，在当前总线周期$T_4$或空闲周期$T_i$的后沿输出保持响应信号HLDA，然后从下一个时钟开始让出总线控制权。外设的DMA传输结束后，使HOLD信号变为低电平，则下一个时钟的下降沿HLDA信号变为低电平（无效）           [HOLD信号由外设驱动]
      
      
        复位和启动操作

        

        复位后的系统状态见RESET信号
      
    
  


2.4 8086系统的存储器组织


  
    小端存储，低字节在低地址单元，高字节在高地址单元
  
  
    存储单元按字节组织，地址范围00000H~FFFFFH
  
  
    存储字（两个字节）采取边界对准（低字节存放在偶地址单元，高字节存放在奇地址单元）的规则存放
  
  
    8086通过低八位数据总线访问偶地址存储单元/IO端口，通过高八位数据总线访问奇地址存储单元/IO端口

    

    从偶地址单元开始读/写一个字，需要一个总线周期

    
      
        
          $\overline{BHE}$
          $A_0$
          操作
          所用数据线
        
      
      
        
          0
          0
          从偶地址单元读/写两个字节
          $D_0 \sim D_{15}$
        
        
          1
          0
          从偶地址单元读/写一个字节
          $D_0 \sim D_7$
        
        
          0
          1
          从奇地址单元读/写一个字节
          $D_8 \sim D_{15}$
        
      
    

    从奇地址单元开始读/写一个字，需要两个总线周期

    
      
        
          $\overline{BHE}$
          $A_0$
          操作
          所用数据线
        
      
      
        
          0
          1
          第一步：从奇地址单元读/写一个字节
          $D_8 \sim D_{15}$
        
        
          1
          0
          第二步：从偶地址单元读/写一个字节
          $D_0 \sim D_7$
        
      
    
  




简答


  
    8086有哪几个通用寄存器？哪些提供了字节访问？

    AX，累加器

    BX，基址寄存器

    CX，计数寄存器

    DX，数据寄存器

    SI，源变址寄存器

    DI，目的变址寄存器

    SP，堆栈指针寄存器

    BP，基址指针寄存器

    AX/BX/CX/DX提供字节访问
  
  
    标志寄存器各标志位的含义？IP和SP的含义？
  
  
    8086有哪几个段寄存器？
  
  
    寄存器和存储器的区别？
  
  
    8086的一个字（16位）是如何存入存储器的？
  
  
    8086分为哪两个部分？它们如何协调工作？

    8086分为总线接口单元和执行单元，BIU和EU是并行工作的，又是相互配合的，体现在：

    
      
        当指令队列中有2个空字节时，BIU就启动，将新指令送入队列
      
      
        EU在指令执行过程中，需要访问存储器或I/O时，向BIU发出请求
      
      
        执行转移指令、调用指令以及返回指令时，指令队列自动清空
      
    
  
  
    8086复位后各寄存器的状态？
  
  
    8086使用存储器地址访问数据时，能根据地址确定数据的大小吗？
  
  
    8086的地址空间是多大？
  
  
    1个段的首地址的特点？
  
  
    一个物理地址由段地址和偏移地址组成，这种表示是唯一的吗？
  
  
    如何将段地址和偏移地址合成成物理地址？
  

" />
    <meta property="og:description" content="8086的编程结构、工作模式、引脚功能、操作和时序以及存储器组织相关知识。

2.1 8086CPU的编程结构


  
    16根地址线、20根数据线、时钟频率5MHz
  
  
    8086分为总线接口单元(BIU)和执行单元(EU)

    

    执行单元包括：

    
      
        通用寄存器

        8个16位寄存器

        
          
            4个通用寄存器：AX、BX、CX、DX

            可以拆分为2个单独的8位寄存器

            
              
                AX 累加器

                I/O指令必用
              
              
                BX 基址寄存器

                存放基地址
              
              
                CX 计数寄存器

                循环指令和串处理隐含的指定计数器
              
              
                DX 数据寄存器

                可与AX拼接成32位，DX中存放高16位

                I/O指令中存放外设端口号
              
            
          
          
            4个通用寄存器：SP、BP、SI、DI，更多被用于变址寻址：SI/DI与段寄存器DS/ES联用实现数据的寻址；SP、BP用于堆栈操作,与SS联用实现寻址

            
              
                SI 源变址寄存器

                间接寻址时用作地址寄存器和变址寄存器

                串操作时用作源变址寄存器
              
              
                DI 目的变址寄存器

                间接寻址时用作地址寄存器和变址寄存器

                串操作时用作目的变址寄存器
              
              
                SP 堆栈指针寄存器
              
              
                BP 基址指针寄存器
              
            
          
        
      
      
        标志寄存器 （记）

        16位（9位有效，7位空闲）

        CF、DF、IF、TF可由指令设置，其余5个由EU设置

        
          
            
              15
              14
              13
              12
              11
              10
              9
              8
              7
              6
              5
              4
              3
              2
              1
              0
            
          
          
            
               
               
               
               
              OF
              DF
              IF
              TF
              SF
              ZF
               
              AF
               
              PF
               
              CF
            
          
        

        
          
            状态位

            (1) CF (Carry Flag)

            进位标志，反应算术运算后最高位（字节操作$D_7$，字操作$D_{15}$）是否出现进位/借位，有进位则为1。

            主要用于加减法，移位和环移指令也会改变CF

            (2) PF (Parity Flag)

            奇偶标志，1表示结果中有偶数个1，0表示结果中有奇数个1

            (3) AF (Auxiliary Carry Flag)

            辅助进位标志，1表示$D_3$向$D_4$进位/借位，0表示没有

            用于BCD码算术运算指令

            (4) ZF (Zero Flag)

            零标志，1标志运算结果为0

            (5) SF (Sign Flag)

            符号标志，与带符号运算的结果符号位（$D_7/D_{15}$）一致，1表示结果为负数

            (6) OF (Overflow Flag)

            溢出标志，带符号数（补码）运算结果是否超过机器能表示的范围（-128~127 / -32768~32767），1表示溢出
          
          
            控制位

            (1) DF (Direction Flag)

            方向标志，字符串操作时用到，字节操作加减1，字操作加减2

            1表示递减，即高地址向低地址

            0表示递增，即低地址向高地址

            (2) IF (Interrupt Enable Flag)

            中断允许标志，1表示允许响应

            IF对不可屏蔽中断请求及内部中断无效

            (3) TF (Trap Flag)

            陷阱标志，为1时每执行完一条指令都自动产生一个内部中断，常用于调试
          
        
      
      
        算术逻辑单元（ALU)
      
      
        EU控制系统
      
    

    总线接口单元包括：

    
      
        段寄存器

        
          
            机器字长=存储字长=16位
          
          
            小端存储，即高字节存放在高地址，低字节存放在低地址，以低字节的地址作为整个字（双字）的地址
          
          
            8086的分段管理：物理地址=(段寄存器)*16+(地址寄存器)

            段与段之间可以是连续的、断开的、部分重叠或全部重叠的

            分段管理的意义：减少指令长度，缩短指令执行时间；便于程序浮动装配

            ​    一些默认行为：

            
              
                取指令时：CS:IP
              
              
                堆栈操作时：SS:SP
              
              
                涉及存储器操作数时（除了以BP为地址寄存器外）：DS作为默认段基址（可替换为CS/DS/ES，添加段跨越前缀）

                偏移地址为某16位偏移量（可以是指令中直接提供的16位地址、某个16位寄存器（BX/DI/SI）中的值、指令中的位移量加上某16位地址寄存器（BX/BP/DI/SI）中的值）
              
              
                ES用于串操作指令中的数据块传送指令：

                源地址：默认DS段基址（可替换为CS/DS/ES，添加段跨越前缀），偏移地址SI

                目的地址：ES:DI
              
              
                BP作地址寄存器：

                SS默认段基址（可替换为CS/DS/ES，添加段跨越前缀），SS:EA
              
            
          
          
            4个段寄存器

            
              代码段寄存器CS
              数据段寄存器DS
              附加段寄存器ES
              堆栈段寄存器SS（后进先出）
            
          
        
      
      
        指令指针寄存器IP（就是计组里说的PC）

        提供下一条指令的地址，具体来说是下一条指令的（代码）段内偏移地址，代码段的段地址由CS提供
      
      
        地址形成逻辑（20位地址加法器形成地址）
      
      
        总线控制逻辑
      
      
        指令队列（6字节指令队列，先进先出，存放待执行指令，出去的进入IP）
      
    
  


2.2 8086CPU的工作模式与引脚功能


  
    工作模式（略）
  
  
    引脚功能

    

    注： /分时复用   (最大模式/最小模式)

    最小模式：

    
      
        $AD_0 \sim AD_{15}$：地址/数据分时复用（双向、三态）

        $T_1$时用作地址总线的低16位，其余时间用作数据总线进行数据传输
      
      
        $AD_{16}/S_3 \sim AD_{19}/S_6$：地址总线高4位/状态总线（输出、三态）

        $T_1$时用作地址总线的高4位（I/O操作中置0），其余时间表示CPU的状态信息

        $S_6$恒为低电平，$S_5$反映IF的值，$S_4$和$S_3$表示正在使用的段寄存器
      
      
        $\overline{BHE}/S_7$：高8位数据总线允许/状态信号（输出）

        $T_1$时作为总线高半部分允许信号，低电平有效，其余时间输出状态信号$S_7$；DMA方式下为高阻态

        与$A_0$结合决定高字节工作还是低字节工作（见奇地址存储与偶地址存储，估计大概率考）
      
      
        CLK：系统时钟信号（输入）
      
      
        RESET：复位信号（输入）

        至少维持4个时钟周期的高电平才有效，复位后各寄存器状态如下图所示：

        

        注意CS寄存器复位后的值是0FFFFH

        IF也被清零辽，系统关中断

        当复位信号变为低电平时，CPU从FFFF0H处开始执行程序，该处通常存放一条JMP指令，以转移到系统程序的实际开始处。复位时地址总线浮空，直到cpu脱离复位状态；其他控制信号先变高一段时间，然后浮空；ALE、HLDA信号变为无效

        复位信号RESET撤销后，经过7个时钟周期，CPU才启动
      
      
        NMI：不可屏蔽中断请求信号（输入）

        上升沿触发，8086完成当前指令后跳转到不可屏蔽中断服务程序
      
      
        INTR：可屏蔽中断请求信号（输入）

        电平触发，每条指令的最后一个时钟周期CPU采样该信号，若INTR为高电平且IF=1，则执行中断响应；若IF=0则不响应，可见INTR可由软件复位IF加以屏蔽
      
      
        READY：准备就绪信号（输入）

        当被访问部件无法在规定时间完成数据传输，就向CPU发READY为低电平的信号，这样CPU就插入若干个等待周期$T_w$，完成传输后被访问部件再使READY信号为高电平
      
      
        $\overline{RD}$：读控制信号（三态、输出）

        低电平时CPU执行读操作；DMA方式下为高阻态
      
      
        $\overline{TEST}$：等待测试控制信号（输入）

        WAIT指令期间，每隔5个时钟周期CPU对该引脚采样，高电平继续等待，低电平继续执行后续指令
      
      
        MN/$\overline{MX}$：最小/最大模式控制信号（输入）
      
      
        M/$\overline{IO}$：存储器/IO访问控制信号（输出）
      
      
        ALE：地址锁存允许信号（输出）

        高电平有效，总线周期的第一个时钟周期内发出正脉冲信号，其下降沿将$AD_0 \sim AD_{15}$以及$AD_{16}/S_3 \sim AD_{19}/S_6$上的地址信息锁存进地址锁存器
      
      
        $\overline{DEN}$：数据允许信号（输出、三态）

        用作总线收发器的允许控制信号，在CPU访存或I/O的总线周期的后一段时间内有效
      
      
        DT/$\overline{R}$：数据发送/接受信号（输出、三态）

        CPU写/读
      
      
        $\overline{WR}$：写控制信号（输出、三态）
      
      
        $\overline{INTA}$：中断响应信号（输出、三态）

        当CPU响应INTR的可屏蔽中断请求时，$\overline{INTA}$在中断响应周期内变为低电平
      
      
        HOLD：保持请求信号（输入）

        高电平时CPU完成当前总线周期后进入HOLD状态，让出总线控制权
      
      
        HLDA：保持响应信号（输出）

        CPU对HOLD信号的响应信号，使三态信号线全部处于高阻态，外部逻辑控制总线
      
    
  
  
    存储器和I/O端口的读写控制信号逻辑

    

    
      
        
          $\overline{RD}$
          $M/\overline{IO}$
          $\overline{WR}$
          操作
        
      
      
        
          0
          1
          1
          读内存
        
        
          0
          0
          1
          读外设
        
        
          1
          1
          0
          写内存
        
        
          1
          0
          0
          写外设
        
      
    

    注意与后面的8237A比较，8237A作为主片时是同时读内存写外设/写内存读外设
  


2.3 8086的操作和时序


  
    基本概念

    机器周期：与主频相关，又叫时钟周期

    指令周期：CPU执行一条指令需要的时间，以机器周期为单位

    总线周期：CPU通过总线访问存储器或I/O设备的时间周期，以机器周期为单位
  
  
    8086的总线周期

    

    缓冲：撤销地址信息，地址信息进地址锁存器

    数据传输：允许插入若干个等待周期
  
  
    8086的操作类型

    内部操作：ALU操作、寄存器操作

    外部操作：总线读/写操作、中断响应操作、中线保持/响应操作、系统复位/启动操作、暂停操作
  
  
    8086的操作时序（最小模式）

    
      
        总线操作

        
          
            总线读操作

            
          
          
            总线写操作

            
          
        
      
      
        中断响应操作

        

        响应中断时CPU执行两个中断周期，第一个周期的$T_2 \sim T_4$时，$\overline{INTA}$为低电平，这里作为对中断请求设备的响应；第二个周期的$T_2 \sim T_4$时，$\overline{INTA}$为低电平，这里用于通知中断请求设备（通过中断控制器）把中断类型号（决定了中断服务程序入口地址）送到数据线低八位（$AD_7 \sim AD_0$）。在8086中，2个周期之间有3个空闲周期$T_i$
      
      
        总线保持与响应操作

        

        其他系统总线主设备向8086请求总线，发送HOLD请求信号，CPU接收到HOLD信号后，在当前总线周期$T_4$或空闲周期$T_i$的后沿输出保持响应信号HLDA，然后从下一个时钟开始让出总线控制权。外设的DMA传输结束后，使HOLD信号变为低电平，则下一个时钟的下降沿HLDA信号变为低电平（无效）           [HOLD信号由外设驱动]
      
      
        复位和启动操作

        

        复位后的系统状态见RESET信号
      
    
  


2.4 8086系统的存储器组织


  
    小端存储，低字节在低地址单元，高字节在高地址单元
  
  
    存储单元按字节组织，地址范围00000H~FFFFFH
  
  
    存储字（两个字节）采取边界对准（低字节存放在偶地址单元，高字节存放在奇地址单元）的规则存放
  
  
    8086通过低八位数据总线访问偶地址存储单元/IO端口，通过高八位数据总线访问奇地址存储单元/IO端口

    

    从偶地址单元开始读/写一个字，需要一个总线周期

    
      
        
          $\overline{BHE}$
          $A_0$
          操作
          所用数据线
        
      
      
        
          0
          0
          从偶地址单元读/写两个字节
          $D_0 \sim D_{15}$
        
        
          1
          0
          从偶地址单元读/写一个字节
          $D_0 \sim D_7$
        
        
          0
          1
          从奇地址单元读/写一个字节
          $D_8 \sim D_{15}$
        
      
    

    从奇地址单元开始读/写一个字，需要两个总线周期

    
      
        
          $\overline{BHE}$
          $A_0$
          操作
          所用数据线
        
      
      
        
          0
          1
          第一步：从奇地址单元读/写一个字节
          $D_8 \sim D_{15}$
        
        
          1
          0
          第二步：从偶地址单元读/写一个字节
          $D_0 \sim D_7$
        
      
    
  




简答


  
    8086有哪几个通用寄存器？哪些提供了字节访问？

    AX，累加器

    BX，基址寄存器

    CX，计数寄存器

    DX，数据寄存器

    SI，源变址寄存器

    DI，目的变址寄存器

    SP，堆栈指针寄存器

    BP，基址指针寄存器

    AX/BX/CX/DX提供字节访问
  
  
    标志寄存器各标志位的含义？IP和SP的含义？
  
  
    8086有哪几个段寄存器？
  
  
    寄存器和存储器的区别？
  
  
    8086的一个字（16位）是如何存入存储器的？
  
  
    8086分为哪两个部分？它们如何协调工作？

    8086分为总线接口单元和执行单元，BIU和EU是并行工作的，又是相互配合的，体现在：

    
      
        当指令队列中有2个空字节时，BIU就启动，将新指令送入队列
      
      
        EU在指令执行过程中，需要访问存储器或I/O时，向BIU发出请求
      
      
        执行转移指令、调用指令以及返回指令时，指令队列自动清空
      
    
  
  
    8086复位后各寄存器的状态？
  
  
    8086使用存储器地址访问数据时，能根据地址确定数据的大小吗？
  
  
    8086的地址空间是多大？
  
  
    1个段的首地址的特点？
  
  
    一个物理地址由段地址和偏移地址组成，这种表示是唯一的吗？
  
  
    如何将段地址和偏移地址合成成物理地址？
  

" />
    
    <meta name="author" content="今天又刷了什么水题" />

    
    <meta property="og:title" content="【汇编与接口】 8086CPU结构" />
    <meta property="twitter:title" content="【汇编与接口】 8086CPU结构" />
    
  <!-- Async font loading -->
<script>
  window.WebFontConfig = {
      custom: {
          families: ['Spoqa Han Sans:100,300,400,700'],
          urls: ['https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css']
      },
      timeout: 60000
  };
  (function(d) {
      var wf = d.createElement('script'), s = d.scripts[0];
      wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js';
      s.parentNode.insertBefore(wf, s);
  })(document);
</script>

<!--adobe fonts-->
<script>
    (function(d) {
      var config = {
        kitId: 'vbt3gjx',
        scriptTimeout: 3000,
        async: true
      },
      h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
    })(document);
</script> 

  <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link rel="stylesheet" type="text/css" href="/style.css" />
  <link rel="alternate" type="application/rss+xml" title="今天又刷了什么水题 - 为者常成，行者常至" href="/feed.xml" />
  <link rel="shortcut icon" href="/favicon.ico">
  <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        inlineMath: [['$','$']]
      }
    });
  </script>

  <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->

</head>

  <body>
    <div class="wrapper-sidebar">
  <header class="sidebar clearfix">
    <div class="site-info">
      
        <a href="/" class="site-avatar"><img src="/logo.jpg" /></a>
       
      <h1 class="site-name"><a href="/">今天又刷了什么水题</a></h1>
      <p class="site-description">为者常成，行者常至</p>
    </div>
  </header>

  <div class="navlist">
    <nav>
      
      
      <a href="/">首页</a>
      
      
      
      <a href="/about">关于</a>
      
      
      
      <a href="/archive">归档</a>
      
      
      
      <a href="/tags">标签</a>
      
      
      
      <a href="/categories">分类</a>
      
      
    </nav>
  </div>

  <div class="wrapper-footer-desktop">
    <footer class="footer">
      <!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  
  
  

  

  
  <li><a href="mailto:hiter_sun@163.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/suniven" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  
  <li><a href="/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM112 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm157.533 0h-34.335c-6.011 0-11.051-4.636-11.442-10.634-5.214-80.05-69.243-143.92-149.123-149.123-5.997-.39-10.633-5.431-10.633-11.441v-34.335c0-6.535 5.468-11.777 11.994-11.425 110.546 5.974 198.997 94.536 204.964 204.964.352 6.526-4.89 11.994-11.425 11.994zm103.027 0h-34.334c-6.161 0-11.175-4.882-11.427-11.038-5.598-136.535-115.204-246.161-251.76-251.76C68.882 152.949 64 147.935 64 141.774V107.44c0-6.454 5.338-11.664 11.787-11.432 167.83 6.025 302.21 141.191 308.205 308.205.232 6.449-4.978 11.787-11.432 11.787z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

</ul>



<p>Copyright (c) 2019-2021 From Gotei13 12th Div.</p>

    </footer>
  </div>
</div>

    
      <aside class="toc">
        <ul>
  <li><a href="#">【汇编与接口】 8086CPU结构</a>
    <ul>
      <li><a href="#21-8086cpu的编程结构">2.1 8086CPU的编程结构</a></li>
      <li><a href="#22-8086cpu的工作模式与引脚功能">2.2 8086CPU的工作模式与引脚功能</a></li>
      <li><a href="#23-8086的操作和时序">2.3 8086的操作和时序</a></li>
      <li><a href="#24-8086系统的存储器组织">2.4 8086系统的存储器组织</a></li>
      <li><a href="#简答">简答</a></li>
    </ul>
  </li>
</ul>
      </aside>
    

    <div id="main" role="main" class="wrapper-content">
      <div class="container">
        <article class="posts">
  <h1>【汇编与接口】 8086CPU结构</h1>

  <div clsss="meta">
    <span class="author">
      Sun
    </span>

    <span class="date">
      2019-12-14
    </span>

    <ul class="tag">
      
      <li>
        <a href="/tags#汇编与接口">
          汇编与接口
        </a>
      </li>
      
      <li>
        <a href="/tags#8086CPU">
          8086CPU
        </a>
      </li>
      
    </ul>
  </div>

  <div class="entry">
    <p>8086的编程结构、工作模式、引脚功能、操作和时序以及存储器组织相关知识。</p>

<h2 id="21-8086cpu的编程结构">2.1 8086CPU的编程结构</h2>

<ul>
  <li>
    <p>16根地址线、20根数据线、时钟频率5MHz</p>
  </li>
  <li>
    <p>8086分为总线接口单元(BIU)和执行单元(EU)</p>

    <p><img src="/assets/images/md/assembly/8086_structure.png" style="zoom:80%;" /></p>

    <p>执行单元包括：</p>

    <ul>
      <li>
        <p>通用寄存器</p>

        <p>8个16位寄存器</p>

        <ul>
          <li>
            <p>4个通用寄存器：AX、BX、CX、DX</p>

            <p>可以拆分为2个单独的8位寄存器</p>

            <ol>
              <li>
                <p>AX 累加器</p>

                <p><strong>I/O指令必用</strong></p>
              </li>
              <li>
                <p>BX 基址寄存器</p>

                <p>存放基地址</p>
              </li>
              <li>
                <p>CX 计数寄存器</p>

                <p><strong>循环指令和串处理隐含的指定计数器</strong></p>
              </li>
              <li>
                <p>DX 数据寄存器</p>

                <p>可与AX拼接成32位，DX中存放高16位</p>

                <p><strong>I/O指令中存放外设端口号</strong></p>
              </li>
            </ol>
          </li>
          <li>
            <p>4个通用寄存器：SP、BP、SI、DI，更多被用于变址寻址：SI/DI与段寄存器DS/ES联用实现数据的寻址；SP、BP用于堆栈操作,与SS联用实现寻址</p>

            <ol>
              <li>
                <p>SI 源变址寄存器</p>

                <p><strong>间接寻址时用作地址寄存器和变址寄存器</strong></p>

                <p><strong>串操作时用作源变址寄存器</strong></p>
              </li>
              <li>
                <p>DI 目的变址寄存器</p>

                <p><strong>间接寻址时用作地址寄存器和变址寄存器</strong></p>

                <p><strong>串操作时用作目的变址寄存器</strong></p>
              </li>
              <li>
                <p>SP 堆栈指针寄存器</p>
              </li>
              <li>
                <p>BP 基址指针寄存器</p>
              </li>
            </ol>
          </li>
        </ul>
      </li>
      <li>
        <p>标志寄存器 <strong><em>（记）</em></strong></p>

        <p>16位（9位有效，7位空闲）</p>

        <p><em>CF、DF、IF、TF可由指令设置，其余5个由EU设置</em></p>

        <table>
          <thead>
            <tr>
              <th>15</th>
              <th>14</th>
              <th>13</th>
              <th>12</th>
              <th>11</th>
              <th>10</th>
              <th>9</th>
              <th>8</th>
              <th>7</th>
              <th>6</th>
              <th>5</th>
              <th>4</th>
              <th>3</th>
              <th>2</th>
              <th style="text-align: center">1</th>
              <th>0</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td> </td>
              <td> </td>
              <td> </td>
              <td> </td>
              <td>OF</td>
              <td>DF</td>
              <td>IF</td>
              <td>TF</td>
              <td>SF</td>
              <td>ZF</td>
              <td> </td>
              <td>AF</td>
              <td> </td>
              <td>PF</td>
              <td style="text-align: center"> </td>
              <td>CF</td>
            </tr>
          </tbody>
        </table>

        <ol>
          <li>
            <p>状态位</p>

            <p>(1) CF (Carry Flag)</p>

            <p>进位标志，反应算术运算后最高位（字节操作$D_7$，字操作$D_{15}$）是否出现进位/借位，有进位则为<strong>1</strong>。</p>

            <p>主要用于加减法，移位和环移指令也会改变CF</p>

            <p>(2) PF (Parity Flag)</p>

            <p>奇偶标志，<strong>1</strong>表示结果中有偶数个1，<strong>0</strong>表示结果中有奇数个1</p>

            <p>(3) AF (Auxiliary Carry Flag)</p>

            <p>辅助进位标志，<strong>1</strong>表示$D_3$向$D_4$进位/借位，<strong>0</strong>表示没有</p>

            <p>用于BCD码算术运算指令</p>

            <p>(4) ZF (Zero Flag)</p>

            <p>零标志，<strong>1</strong>标志运算结果<strong>为0</strong></p>

            <p>(5) SF (Sign Flag)</p>

            <p>符号标志，与带符号运算的结果符号位（$D_7/D_{15}$）一致，<strong>1</strong>表示结果为负数</p>

            <p>(6) OF (Overflow Flag)</p>

            <p>溢出标志，带符号数（补码）运算结果是否超过机器能表示的范围（-128~127 / -32768~32767），<strong>1</strong>表示溢出</p>
          </li>
          <li>
            <p>控制位</p>

            <p>(1) DF (Direction Flag)</p>

            <p>方向标志，字符串操作时用到，字节操作加减1，字操作加减2</p>

            <p><strong>1</strong>表示递减，即<strong>高地址向低地址</strong></p>

            <p><strong>0</strong>表示递增，即<strong>低地址向高地址</strong></p>

            <p>(2) IF (Interrupt Enable Flag)</p>

            <p>中断允许标志，<strong>1</strong>表示允许响应</p>

            <p>IF对不可屏蔽中断请求及内部中断无效</p>

            <p>(3) TF (Trap Flag)</p>

            <p>陷阱标志，为<strong>1</strong>时每执行完一条指令都自动产生一个内部中断，常用于调试</p>
          </li>
        </ol>
      </li>
      <li>
        <p>算术逻辑单元（ALU)</p>
      </li>
      <li>
        <p>EU控制系统</p>
      </li>
    </ul>

    <p>总线接口单元包括：</p>

    <ul>
      <li>
        <p>段寄存器</p>

        <ul>
          <li>
            <p>机器字长=存储字长=16位</p>
          </li>
          <li>
            <p><strong>小端存储</strong>，即高字节存放在高地址，低字节存放在低地址，以低字节的地址作为整个字（双字）的地址</p>
          </li>
          <li>
            <p>8086的分段管理：物理地址=(段寄存器)*16+(地址寄存器)</p>

            <p><em>段与段之间可以是连续的、断开的、部分重叠或全部重叠的</em></p>

            <p>分段管理的意义：减少指令长度，缩短指令执行时间；便于程序浮动装配</p>

            <p>​    一些默认行为：</p>

            <ol>
              <li>
                <p>取指令时：CS:IP</p>
              </li>
              <li>
                <p>堆栈操作时：SS:SP</p>
              </li>
              <li>
                <p>涉及存储器操作数时（除了以BP为地址寄存器外）：DS作为默认段基址（可替换为CS/DS/ES，添加段跨越前缀）</p>

                <p>偏移地址为某16位偏移量（可以是指令中直接提供的16位地址、某个16位寄存器（BX/DI/SI）中的值、指令中的位移量加上某16位地址寄存器（BX/BP/DI/SI）中的值）</p>
              </li>
              <li>
                <p>ES用于串操作指令中的数据块传送指令：</p>

                <p>源地址：默认DS段基址（可替换为CS/DS/ES，添加段跨越前缀），偏移地址SI</p>

                <p>目的地址：ES:DI</p>
              </li>
              <li>
                <p>BP作地址寄存器：</p>

                <p>SS默认段基址（可替换为CS/DS/ES，添加段跨越前缀），SS:EA</p>
              </li>
            </ol>
          </li>
          <li>
            <p>4个段寄存器</p>

            <ol>
              <li>代码段寄存器CS</li>
              <li>数据段寄存器DS</li>
              <li>附加段寄存器ES</li>
              <li>堆栈段寄存器SS（后进先出）</li>
            </ol>
          </li>
        </ul>
      </li>
      <li>
        <p>指令指针寄存器IP（就是计组里说的PC）</p>

        <p>提供下一条指令的地址，具体来说是下一条指令的（代码）段内偏移地址，代码段的段地址由CS提供</p>
      </li>
      <li>
        <p>地址形成逻辑（20位地址加法器形成地址）</p>
      </li>
      <li>
        <p>总线控制逻辑</p>
      </li>
      <li>
        <p>指令队列（6字节指令队列，先进先出，存放待执行指令，出去的进入IP）</p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="22-8086cpu的工作模式与引脚功能">2.2 8086CPU的工作模式与引脚功能</h2>

<ul>
  <li>
    <p>工作模式（略）</p>
  </li>
  <li>
    <p>引脚功能</p>

    <p><img src="/assets/images/md/assembly/8086yinjiao.png" style="zoom:67%;" /></p>

    <p>注： /分时复用   (最大模式/最小模式)</p>

    <p>最小模式：</p>

    <ul>
      <li>
        <p>$AD_0 \sim AD_{15}$：地址/数据分时复用（双向、三态）</p>

        <p>$T_1$时用作地址总线的低16位，其余时间用作数据总线进行数据传输</p>
      </li>
      <li>
        <p>$AD_{16}/S_3 \sim AD_{19}/S_6$：地址总线高4位/状态总线（输出、三态）</p>

        <p>$T_1$时用作地址总线的高4位（I/O操作中置<strong>0</strong>），其余时间表示CPU的状态信息</p>

        <p>$S_6$恒为低电平，$S_5$反映IF的值，$S_4$和$S_3$表示正在使用的段寄存器</p>
      </li>
      <li>
        <p>$\overline{BHE}/S_7$：高8位数据总线允许/状态信号（输出）</p>

        <p>$T_1$时作为总线高半部分允许信号，低电平有效，其余时间输出状态信号$S_7$；DMA方式下为高阻态</p>

        <p><strong>与$A_0$结合决定高字节工作还是低字节工作</strong>（见奇地址存储与偶地址存储，估计大概率考）</p>
      </li>
      <li>
        <p>CLK：系统时钟信号（输入）</p>
      </li>
      <li>
        <p><span id="reset">RESET</span>：复位信号（输入）</p>

        <p>至少维持4个时钟周期的高电平才有效，复位后各寄存器状态如下图所示：</p>

        <p><img src="/assets/images/md/assembly/RESET.png" style="zoom:80%;" /></p>

        <p><strong>注意CS寄存器复位后的值是0FFFFH</strong></p>

        <p><strong>IF也被清零辽，系统关中断</strong></p>

        <p>当复位信号变为低电平时，CPU从FFFF0H处开始执行程序，该处通常存放一条JMP指令，以转移到系统程序的实际开始处。复位时地址总线浮空，直到cpu脱离复位状态；其他控制信号先变高一段时间，然后浮空；ALE、HLDA信号变为无效</p>

        <p>复位信号RESET撤销后，经过7个时钟周期，CPU才启动</p>
      </li>
      <li>
        <p>NMI：<strong>不可屏蔽</strong>中断请求信号（输入）</p>

        <p>上升沿触发，8086完成当前指令后跳转到不可屏蔽中断服务程序</p>
      </li>
      <li>
        <p>INTR：<strong>可屏蔽</strong>中断请求信号（输入）</p>

        <p>电平触发，每条指令的最后一个时钟周期CPU采样该信号，若INTR为高电平且IF=1，则执行中断响应；若IF=0则不响应，可见INTR可由软件复位IF加以屏蔽</p>
      </li>
      <li>
        <p>READY：准备就绪信号（输入）</p>

        <p>当被访问部件无法在规定时间完成数据传输，就向CPU发READY为低电平的信号，这样CPU就插入若干个等待周期$T_w$，完成传输后被访问部件再使READY信号为高电平</p>
      </li>
      <li>
        <p>$\overline{RD}$：读控制信号（三态、输出）</p>

        <p>低电平时CPU执行读操作；DMA方式下为高阻态</p>
      </li>
      <li>
        <p>$\overline{TEST}$：等待测试控制信号（输入）</p>

        <p>WAIT指令期间，每隔5个时钟周期CPU对该引脚采样，高电平继续等待，低电平继续执行后续指令</p>
      </li>
      <li>
        <p>MN/$\overline{MX}$：最小/最大模式控制信号（输入）</p>
      </li>
      <li>
        <p>M/$\overline{IO}$：存储器/IO访问控制信号（输出）</p>
      </li>
      <li>
        <p>ALE：地址锁存允许信号（输出）</p>

        <p>高电平有效，总线周期的第一个时钟周期内发出正脉冲信号，其下降沿将$AD_0 \sim AD_{15}$以及$AD_{16}/S_3 \sim AD_{19}/S_6$上的地址信息锁存进地址锁存器</p>
      </li>
      <li>
        <p>$\overline{DEN}$：数据允许信号（输出、三态）</p>

        <p>用作总线收发器的允许控制信号，在CPU访存或I/O的总线周期的后一段时间内有效</p>
      </li>
      <li>
        <p>DT/$\overline{R}$：数据发送/接受信号（输出、三态）</p>

        <p>CPU写/读</p>
      </li>
      <li>
        <p>$\overline{WR}$：写控制信号（输出、三态）</p>
      </li>
      <li>
        <p>$\overline{INTA}$：中断响应信号（输出、三态）</p>

        <p>当CPU响应INTR的可屏蔽中断请求时，$\overline{INTA}$在中断响应周期内变为低电平</p>
      </li>
      <li>
        <p>HOLD：保持请求信号（输入）</p>

        <p>高电平时CPU完成当前总线周期后进入HOLD状态，让出总线控制权</p>
      </li>
      <li>
        <p>HLDA：保持响应信号（输出）</p>

        <p>CPU对HOLD信号的响应信号，使三态信号线全部处于高阻态，外部逻辑控制总线</p>
      </li>
    </ul>
  </li>
  <li>
    <p>存储器和I/O端口的读写控制信号逻辑</p>

    <p><img src="/assets/images/md/assembly/CPU%E5%92%8C%E5%A4%96%E8%AE%BE%E7%9A%84%E8%AF%BB%E5%86%99%E6%8E%A7%E5%88%B6%E4%BF%A1%E5%8F%B7.png" style="zoom:50%;" /></p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">$\overline{RD}$</th>
          <th style="text-align: center">$M/\overline{IO}$</th>
          <th style="text-align: center">$\overline{WR}$</th>
          <th style="text-align: center">操作</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">0</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">读内存</td>
        </tr>
        <tr>
          <td style="text-align: center">0</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">读外设</td>
        </tr>
        <tr>
          <td style="text-align: center">1</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">写内存</td>
        </tr>
        <tr>
          <td style="text-align: center">1</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">写外设</td>
        </tr>
      </tbody>
    </table>

    <p><em>注意与后面的8237A比较，8237A作为主片时是同时读内存写外设/写内存读外设</em></p>
  </li>
</ul>

<h2 id="23-8086的操作和时序">2.3 8086的操作和时序</h2>

<ul>
  <li>
    <p>基本概念</p>

    <p>机器周期：与主频相关，又叫时钟周期</p>

    <p>指令周期：CPU执行一条指令需要的时间，以机器周期为单位</p>

    <p>总线周期：CPU通过<strong>总线访问</strong>存储器或I/O设备的时间周期，以机器周期为单位</p>
  </li>
  <li>
    <p>8086的总线周期</p>

    <p><img src="/assets/images/md/assembly/t.png" style="zoom:80%;" /></p>

    <p>缓冲：撤销地址信息，地址信息进地址锁存器</p>

    <p>数据传输：允许插入若干个等待周期</p>
  </li>
  <li>
    <p>8086的操作类型</p>

    <p>内部操作：ALU操作、寄存器操作</p>

    <p>外部操作：总线读/写操作、中断响应操作、中线保持/响应操作、系统复位/启动操作、暂停操作</p>
  </li>
  <li>
    <p>8086的操作时序（最小模式）</p>

    <ul>
      <li>
        <p>总线操作</p>

        <ol>
          <li>
            <p>总线读操作</p>

            <p><img src="/assets/images/md/assembly/read.png" style="zoom:80%;" /></p>
          </li>
          <li>
            <p>总线写操作</p>

            <p><img src="/assets/images/md/assembly/write.png" style="zoom:80%;" /></p>
          </li>
        </ol>
      </li>
      <li>
        <p>中断响应操作</p>

        <p><img src="/assets/images/md/assembly/%E4%B8%AD%E6%96%AD%E5%93%8D%E5%BA%94.png" style="zoom:80%;" /></p>

        <p>响应中断时CPU执行两个中断周期，第一个周期的$T_2 \sim T_4$时，$\overline{INTA}$为低电平，这里作为对中断请求设备的响应；第二个周期的$T_2 \sim T_4$时，$\overline{INTA}$为低电平，这里用于通知中断请求设备（通过中断控制器）把中断类型号（决定了中断服务程序入口地址）送到数据线低八位（$AD_7 \sim AD_0$）。在8086中，2个周期之间有3个空闲周期$T_i$</p>
      </li>
      <li>
        <p>总线保持与响应操作</p>

        <p><img src="/assets/images/md/assembly/keep_response.png" style="zoom:80%;" /></p>

        <p>其他系统总线主设备向8086请求总线，发送HOLD请求信号，CPU接收到HOLD信号后，在<strong>当前总线周期$T_4$或空闲周期$T_i$的后沿</strong>输出保持响应信号HLDA，然后从下一个时钟开始让出总线控制权。外设的DMA传输结束后，使HOLD信号变为低电平，则<strong>下一个时钟的下降沿</strong>HLDA信号变为低电平（无效）           [<em>HOLD信号由外设驱动</em>]</p>
      </li>
      <li>
        <p>复位和启动操作</p>

        <p><img src="/assets/images/md/assembly/reset_restart.png" style="zoom:80%;" /></p>

        <p>复位后的系统状态见<a href="#reset">RESET信号</a></p>
      </li>
    </ul>
  </li>
</ul>

<h2 id="24-8086系统的存储器组织">2.4 8086系统的存储器组织</h2>

<ul>
  <li>
    <p>小端存储，低字节在低地址单元，高字节在高地址单元</p>
  </li>
  <li>
    <p>存储单元按字节组织，地址范围00000H~FFFFFH</p>
  </li>
  <li>
    <p>存储字（两个字节）采取<strong>边界对准（低字节存放在偶地址单元，高字节存放在奇地址单元）</strong>的规则存放</p>
  </li>
  <li>
    <p>8086通过低八位数据总线访问偶地址存储单元/IO端口，通过高八位数据总线访问奇地址存储单元/IO端口</p>

    <p><img src="/assets/images/md/assembly/ji_ou.png" style="zoom:60%;" /></p>

    <p>从偶地址单元开始读/写一个字，需要<strong>一个</strong>总线周期</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">$\overline{BHE}$</th>
          <th style="text-align: center">$A_0$</th>
          <th style="text-align: center">操作</th>
          <th style="text-align: center">所用数据线</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">0</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">从偶地址单元读/写两个字节</td>
          <td style="text-align: center">$D_0 \sim D_{15}$</td>
        </tr>
        <tr>
          <td style="text-align: center">1</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">从偶地址单元读/写一个字节</td>
          <td style="text-align: center">$D_0 \sim D_7$</td>
        </tr>
        <tr>
          <td style="text-align: center">0</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">从奇地址单元读/写一个字节</td>
          <td style="text-align: center">$D_8 \sim D_{15}$</td>
        </tr>
      </tbody>
    </table>

    <p>从奇地址单元开始读/写一个字，需要<strong>两个</strong>总线周期</p>

    <table>
      <thead>
        <tr>
          <th style="text-align: center">$\overline{BHE}$</th>
          <th style="text-align: center">$A_0$</th>
          <th style="text-align: center">操作</th>
          <th style="text-align: center">所用数据线</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="text-align: center">0</td>
          <td style="text-align: center">1</td>
          <td style="text-align: center">第一步：从奇地址单元读/写一个字节</td>
          <td style="text-align: center">$D_8 \sim D_{15}$</td>
        </tr>
        <tr>
          <td style="text-align: center">1</td>
          <td style="text-align: center">0</td>
          <td style="text-align: center">第二步：从偶地址单元读/写一个字节</td>
          <td style="text-align: center">$D_0 \sim D_7$</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<hr />

<h2 id="简答">简答</h2>

<ol>
  <li>
    <p>8086有哪几个通用寄存器？哪些提供了字节访问？</p>

    <p>AX，累加器</p>

    <p>BX，基址寄存器</p>

    <p>CX，计数寄存器</p>

    <p>DX，数据寄存器</p>

    <p>SI，源变址寄存器</p>

    <p>DI，目的变址寄存器</p>

    <p>SP，堆栈指针寄存器</p>

    <p>BP，基址指针寄存器</p>

    <p>AX/BX/CX/DX提供字节访问</p>
  </li>
  <li>
    <p>标志寄存器各标志位的含义？IP和SP的含义？</p>
  </li>
  <li>
    <p>8086有哪几个段寄存器？</p>
  </li>
  <li>
    <p>寄存器和存储器的区别？</p>
  </li>
  <li>
    <p>8086的一个字（16位）是如何存入存储器的？</p>
  </li>
  <li>
    <p>8086分为哪两个部分？它们如何协调工作？</p>

    <p>8086分为总线接口单元和执行单元，BIU和EU是并行工作的，又是相互配合的，体现在：</p>

    <ul>
      <li>
        <p>当指令队列中有2个空字节时，BIU就启动，将新指令送入队列</p>
      </li>
      <li>
        <p>EU在指令执行过程中，需要访问存储器或I/O时，向BIU发出请求</p>
      </li>
      <li>
        <p>执行转移指令、调用指令以及返回指令时，指令队列自动清空</p>
      </li>
    </ul>
  </li>
  <li>
    <p>8086复位后各寄存器的状态？</p>
  </li>
  <li>
    <p>8086使用存储器地址访问数据时，能根据地址确定数据的大小吗？</p>
  </li>
  <li>
    <p>8086的地址空间是多大？</p>
  </li>
  <li>
    <p>1个段的首地址的特点？</p>
  </li>
  <li>
    <p>一个物理地址由段地址和偏移地址组成，这种表示是唯一的吗？</p>
  </li>
  <li>
    <p>如何将段地址和偏移地址合成成物理地址？</p>
  </li>
</ol>

  </div>

  
  
<script src="https://utteranc.es/client.js"
        repo=""
        issue-term="issue-term"
        label="utteranc"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


  
</article>

<div class="pagination">
  
    <span class="prev" >
      <a href="/assembly-last-lesson-hyp/">
        ← 上一篇
      </a>
    </span>
  
  
    <span class="next" >
      <a href="/assembly-instruction/">
        下一篇 →
      </a>
    </span>
  
</div>
      </div>
    </div>

    

  </body>

  
  <script>
    document.getElementById("main").classList.add("withtoc");
  </script>
  

  <div class="wrapper-footer-mobile">
    <footer class="footer">
      <!-- Refer to https://codepen.io/ruandre/pen/howFi -->
<ul class="svg-icon">

  
  
  

  

  
  <li><a href="mailto:hiter_sun@163.com" class="icon-8 email" title="Email"><svg viewBox="0 0 512 512"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg><!--[if lt IE 9]><em>Email</em><![endif]--></a></li>
  

  

  

  
  <li><a href="https://github.com/suniven" class="icon-13 github" title="GitHub"><svg viewBox="0 0 512 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg><!--[if lt IE 9]><em>GitHub</em><![endif]--></a></li>
  

  

  

  

  
  <li><a href="/feed.xml" class="icon-21 rss" title="RSS"><svg viewBox="0 0 512 512"><path d="M400 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM112 416c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm157.533 0h-34.335c-6.011 0-11.051-4.636-11.442-10.634-5.214-80.05-69.243-143.92-149.123-149.123-5.997-.39-10.633-5.431-10.633-11.441v-34.335c0-6.535 5.468-11.777 11.994-11.425 110.546 5.974 198.997 94.536 204.964 204.964.352 6.526-4.89 11.994-11.425 11.994zm103.027 0h-34.334c-6.161 0-11.175-4.882-11.427-11.038-5.598-136.535-115.204-246.161-251.76-251.76C68.882 152.949 64 147.935 64 141.774V107.44c0-6.454 5.338-11.664 11.787-11.432 167.83 6.025 302.21 141.191 308.205 308.205.232 6.449-4.978 11.787-11.432 11.787z"/></svg><!--[if lt IE 9]><em>RSS</em><![endif]--></a></li>
  

  

  

  

  

</ul>



<p>Copyright (c) 2019-2021 From Gotei13 12th Div.</p>

    </footer>


</html>
